<div class="dialog-overlay">
  <div class="dialog-container">
    <div class="dialog-header">
      <h1>Team</h1>
      <i class="fa fa-times" (click)="teamsService.closeTeamDialog()"></i>
    </div>
    <div class="dialog-body">

      <div class="tabs">
        <span class="tab" [class.is-active]="tab === 'general'" (click)="switchTab('general')">General</span>
        <span class="tab" [class.is-active]="tab === 'users'" (click)="switchTab('users')">Users</span>
        <span class="tab" [class.is-active]="tab === 'permissions'" (click)="switchTab('permissions')">Permissions</span>
      </div>

      <form #form="ngForm" class="no-padding" *ngIf="tab === 'general'">
        <div class="field">
          <label class="label">Team Title</label>
          <input type="text" class="input" name="title" placeholder="Team Title" [(ngModel)]="teamForm.title" required
            minlength="3">
          <p class="input-info">Name.</p>
        </div>
        <div class="field">
          <label class="label">Description</label>
          <input type="text" class="input" name="description" placeholder="Team Description" [(ngModel)]="teamForm.description"
            required>
          <p class="input-info">A few words what this group is all about.</p>
        </div>
        <div class="field">
          <label class="label">Placeholder Color</label>
          <app-color-picker name="color" [(ngModel)]="teamForm.color" required></app-color-picker>
          <p class="input-info">Pick a color used in placeholders and tags for this group.</p>
        </div>
        <div class="dialog-footer justify-end">
          <button type="button" class="button" (click)="teamsService.closeTeamDialog()">
            <i class="fa fa-times"></i>
            <span>Cancel</span>
          </button>
          <button type="button" class="button" [disabled]="!form.valid || savingTeam" (click)="saveTeam()">
            <i class="fa fa-check"></i>
            <span>Save</span>
          </button>
        </div>
      </form>

      <div class="users-tab" *ngIf="tab === 'users'">

      </div>

      <div class="permissions-tab" *ngIf="tab === 'permissions'">
        <div class="notification is-red mt20" *ngIf="errorFetchingPredefinedPermissions">
          <img src="/assets/images/icons/important-red.svg" class="notification-icon">
          <i class="fa fa-times close-icon" (click)="errorFetchingPredefinedPermissions = null"></i>
          <p>HTTP Error: {{ errorFetchingPredefinedPermissions | json }}</p>
        </div>
        <app-loader *ngIf="fetchingPredefinedPermissions && !errorFetchingPredefinedPermissions" class="mtb20"></app-loader>
        <div class="field" *ngIf="!fetchingPredefinedPermissions">
          <label class="label">Team Applied Permissions</label>
          <div class="checkboxes-container">
            <div class="checkbox-item" *ngFor="let permission of predefinedPermissions">
              <span class="label">{{ permission.title }}</span>
              <app-checkbox [(ngModel)]="permission.enabled" [disabled]="teamForm.id === 1"></app-checkbox>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="dialog-footer justify-end" *ngIf="tab !== 'general'">
      <button type="button" class="button" (click)="teamsService.closeTeamDialog()">
        <i class="fa fa-times"></i>
        <span>Close</span>
      </button>
    </div>
  </div>
</div>
